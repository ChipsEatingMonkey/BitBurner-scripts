<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: prime.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: prime.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @param {NS} ns **/
/**
 * 
 * @param {ns} gameobject
 * @argument {String} target
 * recives one argument {target}: 
 *      target: the server to prime
 * 
 * Primes target server =>
 *          - minimum server security
 *          - maximum server money 
 * 
 * Requirements: 
 *        ./weaken.js
 *        ./grow.js
 */
 export async function main(ns) {
    
    let target = ns.args[0] ?? 'n00dles';

    let minSec = ns.getServerMinSecurityLevel(target);
    let nowSec = ns.getServerSecurityLevel(target);

    let maxMoney = ns.getServerMaxMoney(target);
    let nowMoney = ns.getServerMoneyAvailable(target);

    let freeRam = ns.getServerMaxRam(ns.getHostname()) - ns.getServerUsedRam(ns.getHostname());
    let threadRam = 1.75;
    let isPrimed = false;
    while (!isPrimed){
        /**** TO DO: function caculateThreads that determines how many threads should be started */
        nowSec = ns.getServerSecurityLevel(target);
        nowMoney = ns.getServerMoneyAvailable(target);

        isPrimed = (nowSec - minSec == 0 &amp;&amp; maxMoney - nowMoney == 0);

        if (nowSec - minSec != 0){
            ns.exec('BitBurner-scripts/weaken.js',ns.getHostname(), calculateWeakenThreads(freeRam, minSec, nowSec), target);
           await ns.sleep(ns.getWeakenTime(target) + 100); //added Buffer
        }
        else if (maxMoney - nowMoney != 0){
            ns.exec('BitBurner-scripts/grow.js',ns.getHostname(), calculateGrowThreads(freeRam, maxMoney, nowMoney), target);
           await ns.sleep(ns.getGrowTime(target)+ 100);
        }
        else{
            isPrimed = true;
            ns.print('primed target: ', target);
        }
    }
}

function calculateWeakenThreads(freeRam, minSec, nowSec){
    /**
     * argument {int} freeRam
     * argument {int} minSec : minimum security of the server
     * argument {int} nowSec : current security of the server 
     * 
     * calculates the amount of Threads needed to reach minimum security with one call of weaken.
     * If not enough Ram is available it will do the most threads possible
     */
    return Math.floor();
}


function calculateGrowThreads(freeRam, maxMoney, nowMoney){
      /**
     * argument {int} freeRam
     * argument {int} maxMoney : maximum money the server can hold
     * argument {int} nowMoney : available money on the server now
     * 
     * calculates the amount of Threads needed to reach maximum money with one call of grow.
     * If not enough Ram is available it will do the most threads possible
     */
    return Math.floor();

}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#main">main</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jan 06 2022 18:43:43 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
